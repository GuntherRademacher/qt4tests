<?xml version="1.0" encoding="UTF-8"?>
<test-set xmlns="http://www.w3.org/2010/09/qt-fots-catalog"
           name="fn-html-doc"
           covers-40="PR2013">
   <description>Test html-doc function. Note these tests focus on the options for calling
   the function, not the details of the HTML being parsed: see also misc/HtmlTestSuite.
   </description>


   <test-case name="html-doc-001">
      <description>Test html-doc function: empty sequence</description>
      <created by="Michael Kay, Saxonica" on="2025-07-04"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc(())
      </test>
      <result>
         <assert-empty/>
      </result>
   </test-case>
   
   <test-case name="html-doc-002">
      <description>Test html-doc function: one argument</description>
      <created by="Michael Kay, Saxonica" on="2025-07-04"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc('../misc/HtmlTestSuite/files/test-0000.html')
      </test>
      <result>
         <assert>//Q{http://www.w3.org/1999/xhtml}script[@src="/resources/testharness.js"]</assert>
      </result>
   </test-case>
   
   <test-case name="html-doc-003">
      <description>Test html-doc function: empty options parameter</description>
      <created by="Michael Kay, Saxonica" on="2025-07-04"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc('../misc/HtmlTestSuite/files/test-0000.html', ())
      </test>
      <result>
         <assert>//Q{http://www.w3.org/1999/xhtml}script[@src="/resources/testharness.js"]</assert>
      </result>
   </test-case>
   
   <test-case name="html-doc-004">
      <description>Test html-doc function: empty options parameter</description>
      <created by="Michael Kay, Saxonica" on="2025-07-04"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc('../misc/HtmlTestSuite/files/test-0000.html', {})
      </test>
      <result>
         <assert>//Q{http://www.w3.org/1999/xhtml}script[@src="/resources/testharness.js"]</assert>
      </result>
   </test-case>
   
   <test-case name="html-doc-005">
      <description>Test html-doc function: encoding=utf8</description>
      <created by="Michael Kay, Saxonica" on="2025-07-04"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc('../misc/HtmlTestSuite/files/test-0000.html', {'encoding': 'utf-8'})
      </test>
      <result>
         <assert>//Q{http://www.w3.org/1999/xhtml}script[@src="/resources/testharness.js"]</assert>
      </result>
   </test-case>
   
   <test-case name="html-doc-006">
      <description>Test html-doc function: encoding=iso-8859-2</description>
      <created by="Michael Kay, Saxonica" on="2025-07-04"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc('parse-html/bulgarian.html', {'encoding': 'windows-1251'})
      </test>
      <result>
         <assert>contains(//*:p, "Момчето стоеше на горящата палуба")</assert>
      </result>
   </test-case>
   
   <test-case name="html-doc-007">
      <description>Test html-doc function: bad html, no options</description>
      <created by="Michael Kay, Saxonica" on="2025-07-04"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc('parse-html/bad.html')
      </test>
      <result>
         <assert>contains(//*:body, "But me no buts")</assert>
      </result>
   </test-case>
   
   <test-case name="html-doc-008">
      <description>Test html-doc function: bad html, fail-on-error=false</description>
      <created by="Michael Kay, Saxonica" on="2025-07-04"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc('parse-html/bad.html', {'fail-on-error': false()})
      </test>
      <result>
         <assert>contains(//*:body, "But me no buts")</assert>
      </result>
   </test-case>
   
   <test-case name="html-doc-009">
      <description>Test html-doc function: include-template-content option has been dropped</description>
      <created by="Michael Kay, Saxonica" on="2025-09-30"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc('parse-html/bad.html', {'fail-on-error': false(), 'include-template-content': true()})
      </test>
      <result>
         <error code="XPTY0004"/>
      </result>
   </test-case>
   
   <test-case name="html-doc-009">
      <description>Test html-doc function: bad html, fail-on-error=false</description>
      <created by="Michael Kay, Saxonica" on="2025-07-04"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>
         html-doc('parse-html/bad.html', {'fail-on-error': true()})
      </test>
      <result>
         <error code="FODC0011"/>
      </result>
   </test-case>
</test-set>
