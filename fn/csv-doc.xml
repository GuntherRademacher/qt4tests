<test-set xmlns="http://www.w3.org/2010/09/qt-fots-catalog" name="fn-csv-doc" covers-40="PR2013">
  <description>Tests for the fn:csv-doc function</description>
  
  <!-- Currently just a placeholder to remind us that the function exists... -->
  
  <dependency type="spec" value="XP40+ XQ40+"/>
  
  <environment name="csv-to-xml-schema">
    <schema uri="http://www.w3.org/2005/xpath-functions" 
      file="csv-to-xml/schema-for-csv.xsd">
      <description>The schema for analyze-string-result and csv-to-xml elements defined in Functions and Operators 4.0.</description>
    </schema>
  </environment>     
  
  <test-case name="csv-doc-001">
    <description>Empty sequence</description>
    <created by="Michael Kay" on="2024-02-26"/>
    <test><![CDATA[fn:csv-doc(())]]></test>
    <result>
      <assert-empty/>
    </result>
  </test-case>
  
   <test-case name="fn-csv-doc-bom-001" covers-40="PR2013">
      <description>Binary file input</description>
      <created by="Christian Gruen" on="2025-10-02"/>        
      <environment name="empty"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>csv-doc('parse-csv/bom-none.csv')?rows?1</test>
      <result>
         <assert-string-value>𱁬</assert-string-value>
      </result>
   </test-case>
   <test-case name="fn-csv-doc-bom-002" covers-40="PR2013">
      <description>Binary file input with BOM</description>
      <created by="Christian Gruen" on="2025-10-02"/>        
      <environment name="empty"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>csv-doc('parse-csv/bom-utf8.csv')?rows?1</test>
      <result>
         <assert-string-value>𱁬</assert-string-value>
      </result>
   </test-case>
   <test-case name="fn-csv-doc-bom-003" covers-40="PR2013">
      <description>Binary file input with BOM</description>
      <created by="Christian Gruen" on="2025-10-02"/>        
      <environment name="empty"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>csv-doc('parse-csv/bom-utf16le.csv')?rows?1</test>
      <result>
         <assert-string-value>𱁬</assert-string-value>
      </result>
   </test-case>
   <test-case name="fn-csv-doc-bom-004" covers-40="PR2013">
      <description>Binary file input with BOM</description>
      <created by="Christian Gruen" on="2025-10-02"/>        
      <environment name="empty"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>csv-doc('parse-csv/bom-utf16be.csv')?rows?1</test>
      <result>
         <assert-string-value>𱁬</assert-string-value>
      </result>
   </test-case>
   <test-case name="fn-csv-doc-bom-005" covers-40="PR2013">
      <description>Binary file input with invalid BOM</description>
      <created by="Christian Gruen" on="2025-10-02"/>        
      <environment name="empty"/>
      <dependency type="spec" value="XP40+ XQ40+"/>
      <test>csv-doc('parse-csv/bom-invalid.csv')?rows?1</test>
      <result>
         <error code="FOUT1200"/>
      </result>
   </test-case>

</test-set>
